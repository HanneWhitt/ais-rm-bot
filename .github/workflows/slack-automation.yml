name: HannesBot Slack Automation

# Auto-generated from messages.yaml on 2025-08-09 15:41:26
# DO NOT EDIT - run 'python generate_workflow.py' to update

on:
  schedule:
    - cron: '44 14 * * 6'  # test_weekly_message - Weekly - saturday at 15:44 (BST period)
    - cron: '44 15 * * 6'  # test_weekly_message - Weekly - saturday at 15:44 (GMT period)
    
  # Allow manual triggering
  workflow_dispatch:
    inputs:
      dry_run:
        description: 'Run in dry-run mode (show what would be sent)'
        required: false
        default: 'false'
        type: boolean

jobs:
  send-slack-messages:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install requests pyyaml
        
    - name: Run HannesBot
      env:
        SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}
      run: |
        if [ "${{ github.event.inputs.dry_run }}" = "true" ]; then
          python hannes_bot.py --dry-run
        else
          python hannes_bot.py
        fi
        
    # Optional: List all configured messages (on manual run)
    - name: List configured messages (on manual run)
      if: github.event_name == 'workflow_dispatch'
      env:
        SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}
      run: |
        echo "ðŸ“‹ All configured messages:"
        python hannes_bot.py --list

# Summary of scheduled messages:
#
# â€¢ test_weekly_message: saturday at 15:44 (weekly)
#
